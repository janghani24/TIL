### Thread

#### 쓰레드 우선순위
* 동시성, 병렬성으로 실행된다.   
* 동시성 : 멀티 작업을 위해 하나의 코어에서 멀티 쓰레드가 번갈아가며 실행하는 성질.   
* 병렬성 : 멀티 작업을 위해 멀티 코어에서 개별 쓰레드를 동시에 실행하는 성질.   
* 쓰레드의 갯수 > 코어의 수 => 어떤 순서에 의해 실행할것인가를 결정 => 쓰레드 스케줄링. => 각자의 run()메서드를 조금씩 실행한다.   
* 쓰레드 스케줄링 : 우선순위 방식, 순환 할당방식.   
* 우선순위 방식 : 우선순위가 높은 쓰레드가 실행 상태를 더 많이 가지도록. 개발자가 코드로 제어할 수 있다. 1이 가장 낮고 10이 가장 높다. 부여하지않으면 기본적으로 5를 가짐. 우선순위를 변경하고 싶으면 setPriority()메서드를 이용.   
* 순환 할당 방식 : 실간 할당량을 정해서 하나의 쓰레드를 정해진 시간만큼 실행. 코드로 제어x.   

```java
// 우선순위 할당 할 때 값을 직접 줄 수도 있지만 Thread 클래스의 상수를 이용할 수도 있다.
thread.setPriority(Thread.MAX_PRIORITY); // 10
thread.setPriority(Thread.NORM_PRIORITY); // 5
thread.setPriority(Thread.MIN_PRIORITY); // 1
```
#### 동기화 메서드, 동기화 블록
* 멀티 쓰레드 환경에서 객체를 공유해서 작업하는 경우가 존재! 이 때 한 쓰레드에 의해 객체의 상태가 변경될 수 있기때문에 다른 쓰레드에서 의도한 결과가 나오지않을 수도 있다.   
* 쓰레드가 사용 중인 객체를 다른 쓰레드가 변경할 수 없게 하려면 작업이 끝날 때까지 객체에 잠금을 걸어서 다른 쓰레드가 사용할 수 없게 해야함.   
* 임계영역 : 단 하나의 쓰레드만 실행할 수 있는 코드 영역.   => synchronized(동기화)메서드, 동기화 블록 사용.   
* synchronized -> 인스턴스, 정적 메서드 어디든지 붙일 수 있음.   
* 동기화 메서드 : 메서드 전체 내용이 임계 영역이므로 실행 즉시 잠금이 일어남.   
* 동기화 블록 : 일부 내용만 임계영역으로 만들고 싶다면 synchronized블록 만들면 됨.   

```java
// synchronized 메서드
public synchronized void method() {
  임계 영역;
}

// synchronized 블록
public void method () {
  // 다른 쓰레드들도 사용가 능한 영역
  ...
  synchronized(공유객체) {
    임계영역;
  }
  // 다른 쓰레드들도 사용 가능한 영역
  ....
  }
```

#### 쓰레드 상태
* start()메서드를 호출 할 때, 바로 실행되는 것x! 실행 대기 상태.(Runnable) => 스케줄링이 되지 않아서 실행을 기다리고 있는 상태.   
* 스케줄링으로 선택된 쓰레드가 CPU점유,run()메서드 실행 => 실행(Running) 상태.   
* 실행 상태의 쓰레드는 run()메서드를 모두 실행하기 전에 스케줄링에 의해 다시 실행 대기 상태로 돌아갈 수 있다. => 이렇게 번갈아가면서 자신의 run()메서드를 조금씩 실행.   
* run()메서드 종료 => 종료 상태(Terminated)   
* 실행 -> 대기 외에도 실행 -> 일시 정지 상태도 가능.   
* 일시 정지 상태 => 쓰레드가 실행할 수 없는 상태.(Waiting, Timed_waiting,Blocked) => 다시 실행상태로 가려면 일시 정지 상태에서 실행 대기 상태로 가야함!   
* 쓰레드의 상태 확인 =>getState()메서드 사용.   

> NEW : 쓰레드 객체가 생성. start()메서드가 호출되지 않은 상태   
> RUNNABLE : 살행 상태로 언제든지 갈 수 있는 상태   
> WAITING : 다른 쓰레드가 통지할 때까지 기다리는 상태   
> TIMED_WAITING : 주어진 시간 동안 기다리는 상태   
> BLOCKED : 사용하려는 객체의 락이 풀릴 때까지 기다리는 상태   
> TERMINATED : 실행을 마친 상태   

#### 쓰레드 상태 제어
* 쓰레드의 상태를 변경 -> 쓰레드 상태 제어   
* 더이상 사용하지 않도록 권장된 deprecated메서드 => resume(), suspend(), stop()   

> wait() : 동기화 블록 내에서 쓰레드를 일시 정지 상태로 만듬. 매개값으로 시간이 주어지면 그 시간이 지난 후 실행 대기 상태로. 없으면 notify(),notifyAll()메서드로 실행 대기 상태로(Object메서드)   
> notify(), notifyAll() : 동기화 블록 내에서 wait()메서드에 의해 ㅇㄹ시 정지 상태에 있는 쓰레드를 실행 대기 상태로(Object메서드)   
> interrupt() : 일시 정지 상태의 쓰레드를 InterruptedException예외를 발생시켜 실행 대기 상태로 가거나 종료 상태로 가게함.   
> sleep() : 주어진 시간 동안 일시 정지 상태로. 주어진 시간이 지나면 자동으로 실행 대기 상태가 됨.(매개값으로 시간을 받아야함)   
> join() : 일시 정지 상태가 된다. 실행 대기 상태로 가려면 join()메서드를 멤버로 가지는 쓰레드가 종료되거나, 매개값으로 주어진 시간이 지나야함.   
> yield() : 실행 중에 우선순위가 동일한 다른 쓰레드에게 실행을 양보. 실행 대기 상태가 됨.   



